# Install IoT Edge, Moby Engine And Configure IoT Edge Device

## Provision and Configure IoT Edge Device

1. Navigate to the Environment Details tab, and expand the **Resource Group:** linuxvm-rg-<inject key= "DeploymentID"></inject>

   ![LinuxVM-RG](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/021.png?raw=true)
   
2. After expanding the linuxvm-rg Resource Group, we will SSH into the LinuxVM and install **IoT Edge,IoT Edge Runtime, Moby Engine, and configure the container**

   ![LinuxVM-Details](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/022.png?raw=true)
   
3. Click on the **Terminal** icon in the taskbar, and open up an Ubuntu 22.04 LTS session:

   ![Terminal-Ubuntu](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/023.png?raw=true)
   
4. Now, enter the following command to SSH into the LinuxVM:
   
   ssh linuxuser@<inject key= "LinuxVMDNSName"></inject>
   
   ![SSH-Ubuntu](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/024.png?raw=true)
   
5. If there is a prompt **"Are you sure you want to continue connecting(yes/no/[fingerprint])?"**, enter yes

   ![SSH-Prompt-Yes](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/025.png?raw=true)
   
6. You will then be prompted to enter the password, make sure to copy and paste the password: <inject key= "LinuxVMAdminPassword"></inject>, and then hit enter. After logging in , enter **Ctrl+L** to clear the login details

   ![SSH-Enter-Password](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/026.png?raw=true)
   
7. Run the following command to install **IoT Edge**:

   ```
   wget https://packages.microsoft.com/config/ubuntu/22.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
	 sudo dpkg -i packages-microsoft-prod.deb
   rm packages-microsoft-prod.deb
   ```
   
   ![Install-IoT-Edge](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/027.png?raw=true)
   
8. Run the following command to install **Moby Engine**:

   ```
   	sudo apt-get update; \
      sudo apt-get install moby-engine -Y
   ```
   
   ![Install-Moby-Engine](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/028.png?raw=true)
   
9. Run the following command to install Nano Text Editor:

   ```
   sudo apt-get install nano
   ```
   
   ![Install-Vim](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/030a.png?raw=true)
   
10. Run the following command to configure container as logging mechanism:

   ```
   	sudo nano /etc/docker/daemon.json
   ```
   
   ![Configure-Daemon.json](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/031b.png?raw=true)
   
11. Set the default logging driver to the local logging by pasting/typing the below code:

   ```
   {
      "log-driver": "local"
   }
   ```
   
   ![Local](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/031.png?raw=true)
   
   Now, press **Ctrl+X** which will open another prompt to save the changes made to the container daemon.json file, press **Y**.
   
   ![Docker-Daemon-Save](https://github.com/CloudLabsAI-Azure/Automated-Quality-Inspection/blob/aiot/media/032.png?raw=true)
   
   Another prompt will ask you to be written to the file: **/etc/docker/daemon.json**, press **Enter**.
   
   



   
